<a name="top"></a>

[top]: #top "到文档最上边"

* [前言](#introduction)
* [用户手册](#manual)
	* [标签](#label)
	* [编辑任务](#edit)
		* [添加任务](#add)
		* [删除任务](#del)
		* [修改任务](#mod)
		* [转移任务](#tran)
	* [记录任务所用时间](#exec)
	* [终极编辑器](#editor)
	* [本程序的优点](#advantages)
* [编译程序](#compile)
* [运行程序及开机启动](#run)
* [数字版本约定](#version)
* [源码介绍](#source)

前言---------
	简单的介绍了做这个程序的动机,
	以及程序功能的简介  
用户手册-------------
	各种操作的详细介绍  
编译程序--------------
	怎么编译源代码  
运行程序及开机启动-----------
	怎么运行这个程序,
	以及怎么设置开机启动  
数字版本约定-----------
	本程序已实现了核心功能,
	但仍在开发中,
	这里介绍了版本数字的含义  
源码介绍-------------
	如果你想研究本程序的源代码,
	或者参与开发,
	这里有目前代码框架的介绍

--------------------------

<a name="introduction"></a>
# 前言

很多人有规划自己时间的习惯,尤其对于程序员,
有些程序就是一场马拉松,1天是肯定做不完的.
所以就规划一下时间,每天做一点,
这样一个大任务就被大而化小了.

任务需要被分配,同时每天的可用时间又充满变数,
**我们就需要合理地分配好任务,既没有落下任务没有做完,
又完成了必须坚持的优先级最高的任务,
使得可用时间被充分的利用.**

**俗话说:好记性不如好程序.**
我一直在寻找合适的任务分配程序:

1. ## 用HoHoo日历,有个便签功能,可以写一个便签放置在桌面上:

	![hohoo][]

	但是跟时间还是扯不上关系,有时候为1天分配了很多的任务,
	写在一个便签中,到后来只完成了一小部分,太伤心了!

	而且便签虽然有日期设定,
	但是默认每天都是显示所有便签,
	如果有个几天的计划,显示起来就太乱了:

	![mess][]

2. ## eclipse中有个Task List,里边可以安排树形任务

	![tasklist][]

	它还有任务激活\中断\完成\隐藏已完成任务的操作.

	但是它与时间的关联也就是预计一下任务的所需时间,
	但是**因为没有记录任务实际所用时间,
	这个估计的所需时间就没有得到有效的验证,
	不能为以后分配任务提供参考意见**.

## 小结:

虽然有各种措施记录任务,但是往往都跟时间联系不紧密.
**将任务与时间紧密关联起来,可以更好更合理地分配任务.**

所以我从eclipse的Task List出发,完善与时间相关的部分,
实现一个新的任务管理器:

1. 每个任务也有预计所需时间的功能
2. 任务有激活\中断\完成操作
3. **在任务激活\中断\完成的时候统计时间,
最终可得出这个任务完成之前共花了多少时间**
(这个时间可为以后的同类任务的时间分配提供参考意见)

以下是程序主窗体截图:

![taskmanager][]

## 特色

1. 基于时间的树型任务

	按时间跨度分配不同规模的任务(年\月\周\日),  
	一个任务可以隶属于一个更大规模的任务

1. 界面可大可小

	为了满足不同的需要,**界面有最大\一般\最小3种大小**,
	最小只有桌面一个图标那么小,不占用屏幕空间.

1. 所见即所存

	所有任务的相关信息都保存在文件中(**data文件夹下**)
	任务的添加/删除/修改会立即写入相关文件,
	所见即所存,所以很安全

1. 0% CPU占用率

	**没有计时线程,通过各种事件发生的时间差获得时间间隔,**
	所以不点击的时候不占用CPU资源,
	点击的时候读取1次系统时间进行各种运算,
	像个发条一样,你的点击是各种计算过程的原动力

## 缺点

1. 既然是程序,那么必须在电脑上运行,
	谁会一天都用电脑?*...程序猿荡过...*

1. 因为是用java开发的,那就必须装JDK才能用,
	我写了一个脚本:start.vbs,
	如果你已经将JDK的bin目录加入到了PATH中,
	双击它就可以运行

[回顶部][top]

[hohoo]: http://fmn.rrimg.com/fmn065/20120804/2125/original_Aqna_1b5c00002ce5118d.jpg "HoHoo"
[mess]: http://fmn.rrimg.com/fmn063/20120808/0900/original_myH6_412b000037b21260.jpg "乱糟糟"
[tasklist]: http://fmn.rrimg.com/fmn065/20120808/0900/original_XoK2_0c420000e3c6125d.jpg "eclipse Task List"
[taskmanager]: http://fmn.rrimg.com/fmn056/20120808/0900/original_CQI4_027d00000ec2118e.jpg
"今日事今日毕"

---------------------

<a name="manual"></a>
# 用户手册

<a name="label"></a>
## 标签

从刚才的主窗体截图中可以看出最上边显示了几行运行时信息,
这是一个标签组件,它有3个事件:

* 单击

	单击事件会**更新标签显示的信息**  
(前面已经介绍过为了减少资源占用,
程序是没有实时的计时线程的,
所以**不会实时更新这些数据**)

* 拖动标签

	**拖动标签==拖动窗体**  
(在3种界面模式下**都可以通过拖动标签来拖动窗体**)

* 右键单击

	右键单击会弹出右键菜单:

	![labelr][]

	* 最大\一般\最小

		这就是**切换窗体大小**的菜单了.
	看看它们的效果吧:

		* 最大

			显示所有的组件

			![big][]

		* 一般

			显示标签和"今日"表格

			![normal][]

		* 最小

			只显示标签

			![mini][]

		在最大模式下有窗体边框,而一般和最小是没有的,
	所以**只有在最大模式下可以拖动边框改变窗体的大小**,
	在界面切换的时候会记住表格的宽度以保持这个大小.

	* 编辑

		这是2号重要功能:[终极编辑器](#editor),
	可以**编辑任意一天\周\月\年的任务**,之后介绍

	* 置顶

		这个功能的效果就不言自明了吧,
	任务管理器必须有这样的功能啊!

	* 退出

		退出这个程序

		**在3种模式下都可以使用这个方法退出程序,
	在最大模式下还可以通过点击窗体的关闭按钮来退出程序**.

[回顶部][top]

[labelr]: http://fmn.rrimg.com/fmn065/20120808/0905/original_Bqpn_376100001adf118c.jpg "标签的右键菜单"
[big]: http://fmn.rrimg.com/fmn063/20120808/0905/original_MJiK_1bbc00005257125c.jpg "最大模式"
[normal]: http://fmn.rrimg.com/fmn060/20120808/0905/original_CzQ2_376100001ae0118c.jpg "一般模式"
[mini]: http://fmn.rrimg.com/fmn064/20120808/0905/original_KlMp_43bd000025631260.jpg "最小模式"

---------

<a name="edit"></a>
## 编辑任务

### 注意保护有用的数据

**任务数据文件以及以后版本可能引入的其他数据文件
都存储在data文件夹下**,
看看data文件夹下的文件名你能猜到存的是什么东西了
(二进制文件,内容就不好看了),
如果想对程序的某个功能进行测试的话,
**为了避免影响到原来有用的数据,
请将data文件夹复制一份到别的地方,
如果数据异常了,要删的删不了,
那就可以把损坏的data替换为备份的data,
一切就正常了**,
否则要手动维护的话就得非常清楚源代码才行.

最大模式的主窗体中有5个表格,
分别显示今天\明天\本周\本月\今年的任务,
这5个表格其实源于同一个类,
它们都有一样的**右键菜单**
(编辑任务的操作一般就是通过这个菜单触发的):

![tabler][]

[tabler]: http://fmn.rrimg.com/fmn063/20120808/0905/original_G7vx_43bd0000255f1260.jpg "任务表格的右键菜单"

----------------

<a name="add"></a>

* 添加任务

	右键菜单中选择"添加新任务"就打开了添加任务对话框,
**这对话框会因为编辑不同的任务,显示不同的组件**:

	1. 添加年任务

		![year][]

	2. 添加月任务

		![month][]

	3. 添加周任务

		![week][]

	4. 添加天任务

		![day][]

	关于这个单任务编辑对话框:

	* 编辑完成后可以左键单击确定按钮完成操作,
**也可以直接回车**

	* 点击这个对话框的关闭窗体按钮会**取消这次操作**.

	* 天任务中所需时间的计算公式是:

		needTime = (hours * 60 +
	mins) * 60 * 1000 (毫秒)

		可以输入1小时-20分钟来表示40分钟,
	但不接受小于或等于0分钟的所需时间,
	且未检查数据类型,**不要输入浮点数或非数字**.

	添加完成后,最终各表格内容变成了这个样子:

	![addfinish][]

	注意到周\月\年的所需时间的变化没?
**它们刚创建后所需时间都是0:0:0,
随后创建一个天任务,天任务的所需时间就加入到各层父任务中**.

	各任务可能的关系如下图:

	![fathertree][]

	各任务关系的规则:

	* 一个任务可以隶属于一个更高级的任务(比它高1级或多级),
	也可以不隶属于任何一个任务
	* 一个高级任务的所需时间和已用时间是所有隶属于它的
	天任务的对应时间的总和

	[回顶部][top]

[year]: http://fmn.rrimg.com/fmn061/20120808/0905/original_5DvU_41540000039f125d.jpg "添加年任务"
[month]: http://fmn.rrimg.com/fmn064/20120808/0905/original_Ry9D_373700001af0118c.jpg "添加月任务"
[week]: http://fmn.rrimg.com/fmn056/20120808/0905/original_S94Z_4c590000e303125e.jpg "添加周任务"
[day]: http://fmn.rrimg.com/fmn063/20120808/0900/original_hh59_0bda000019da125b.jpg "添加天任务"
[addfinish]: http://fmn.rrimg.com/fmn056/20120808/0905/original_8chf_413700000397125d.jpg "添加完成"
[fathertree]: http://fmn.rrfmn.com/fmn058/20120808/0905/original_q1hx_548300000ef9118f.jpg "任务树"

	------------------

<a name="del"></a>

* 删除任务

	只要能删的任务,选中它,
右键选择"删除任务"就把它删除了(**还可以使用del键**).

	有些任务是不能删除的:

	* 已完成的任务
	* 所需时间不为0的高级任务
	* "总计"行

	在删除这些任务的时候,程序会跳出出错提示,
并**终止这次操作**:

	![forbidd][]

[forbidd]: http://fmn.rrimg.com/fmn064/20120808/0905/original_MvSX_5eba00001121125f.jpg "删除被阻止"

	------------------

<a name="mod"></a>

* 修改任务

	只有能删除的任务才能被修改,
因为修改最终实现其实是
**删除旧任务,再添加新任务**.

	修改一个任务,会先读取任务的相关内容,
然后设置相关组件,使得单任务编辑对话框中显示
这个任务的原来的信息,
用户只需要修改想要改变的部分就可以了,
**修改对话框的组件布局跟对应添加任务对话框是一样的**.

	--------------------

<a name="tran"></a>

* 转移任务

	这个功能没有原生支持,
但是可以通过组合已实现的功能来方便的达到目的.

	下面演示怎么将前面添加在"今日"
表格中的任务"1.将冰箱门打开"转移到"明天":

	1. 修改要转移的任务,
	**打开对话框后直接点关闭窗体按钮**

		![tranm][]

	1. 删除该任务

		删除"1.将冰箱门打开"后:

		![trand][]

	1. 在"明天"添加一个任务,
	**对话框已经"预测"到了我们要添加的内容**  
	O(∩_∩)O~

		![trana][]

	修改一下父任务的下拉框后确认,
最后表格内容就变成这样了:

	![tranfinish][]

	其中第2步和第3步可以交换先后顺序

	这么做的原理是:

	* 修改任务会读取任务内容设置各个组件
	* 添加任务的时候不擦除组件之前的设置

	所以**任务名\所需时间会被"记住"**

[回顶部][top]

[tranm]: http://fmn.rrfmn.com/fmn058/20120808/0905/original_rtBj_28e6000060ff118f.jpg "修改要转移的任务"
[trand]: http://fmn.rrimg.com/fmn060/20120808/0900/original_EnaR_0bb0000019d5125b.jpg "删除要转移的任务"
[trana]: http://fmn.rrimg.com/fmn061/20120808/0905/original_IPqj_1ab700005eb31191.jpg "添加任务"
[tranfinish]: http://fmn.rrimg.com/fmn064/20120808/0905/original_M1no_3b8100000fa1118c.jpg "完成转移"

----------------

<a name="exec"></a>

## 记录任务所用时间

这个程序根据激活\中断\完成这3个操作来
**累计所用时间**

"今天"表格左右各有一列多选按钮:

* 左边是"激活\中断"按钮
* 右边是"完成"按钮

根据当前有无任务在执行(**只能同时执行1个任务**),
可以分为两种状态:

* 无任务

	这时候只能进行激活操作,
**且只能激活未完成的任务**

	点击"今日"表格中"激活"按钮激活一个未完成的任务:

	![start][]

	一个任务被激活后:

	* "激活"按钮打了个勾,变成了"中断"按钮
	* 当前任务的内容变成红粗字体
	* 标签最后增加一行显示"当前任务已用时间",
	**单击标签,这个时间也会跟着更新**

* 有任务

	这时候可以进行中断\切换\完成操作

	* 中断

		左键单击"中断"按钮,
	中断了当前任务,当前任务在**从激活到中断的这段时间会被
	加入到已用时间中,如果已用时间超越了所需时间,
	所需时间会自动扩增为已用时间的130%.**

		"今天"表格显示的那个时间的意义为:

		* 对于未完成任务:所需时间
		* 对于已完成任务:所用时间

	* 切换

		左键单击其他未激活的"激活"按钮,
	就切换了当前执行的任务.

		切换任务的实现是:
	**中断当前任务,激活另一个任务**

	* 完成

		左键单击"完成"按钮,就结束了一个任务:

		![finish][]

		* "中断"按钮的勾去掉了
		* 任务内容变成灰色
		* 显示这个任务所用时间
		* "完成"按钮被勾上了

		这个任务就是已完成的任务了,
	右键单击表格选择"隐藏已完成",
	就会隐藏这样的任务.

当一个高级任务的所有天任务都完成了后,
高级任务也就完成了:

![fatherfin][]

**已完成的天任务没法进行任何操作了,
但是已完成的高级任务可以添加新的子任务(天任务)
来再度复活!**

![fathercb][]

[回顶部][top]

[start]: http://fmn.rrfmn.com/fmn058/20120808/0905/original_PGHd_14c700005e65125d.jpg "激活一个任务后"
[finish]: http://fmn.rrimg.com/fmn056/20120808/0905/original_XEDW_035600003d60118d.jpg "完成一个任务后"
[fatherfin]: http://fmn.rrfmn.com/fmn058/20120808/0905/original_hwTl_158a00005e66125c.jpg
"完成所有子任务后"
[fathercb]: http://fmn.rrimg.com/fmn057/20120808/0905/original_hitB_36fa00001975125d.jpg
"复活已完成的高级任务"

------------------

<a name="editor"></a>

## 终极编辑器(2号重要功能)

取个这么霸气的名字肯定是有原因的:  
我们可以看到在主界面窗体中只有5个**固定**的表格:
今天\明天\本周\本月\今年,
那么**在主界面中我们只能编辑\预设这5个范围内的任务,
而终极编辑器可以编辑任意天\周\月\年的任务**.

终极编辑器的界面是这样的:

![editor][]

界面上组件分3行:

* 向上按钮 + 向下下拉框
* 表格
* 平行下拉框

3个按钮\下拉框的动作:

* 向上按钮: 编辑更高一级的任务集合
* 向下下拉框: 编辑更低一级的任务集合
* 平行下拉框: 编辑同一级的其他任务集合

**其实利用第1行的两个按钮\下拉框就可以闭包编辑所有阶段的任务了,
但是有平行的下拉框总是会方便点.**

单个任务的添加\删除\修改\转移操作
跟[编辑任务](#edit)里的一样
(**不能在主窗体和终极编辑器间转移任务,
因为它们分别使用两个单任务编辑对话框**)

[回顶部][top]

[editor]: http://fmn.rrfmn.com/fmn058/20120808/0905/original_TDUT_54e000000ed1118f.jpg "终极编辑器对话框"

----------------

<a name="advantages"></a>

## 今日事今日毕是如何更好更合理地分配任务的

1. **记录任务的持续时间**,
使用户对某种任务的所需时间有丰富经验,
用得久了,用户会更了解自己的效率,
**可以更好更合理地分配任务**

1. 程序负责一些加减等计算任务,
虽然人也可以做,但为什么不交给机器来做呢?

1. **可以为任意时间分配任务,
但主界面上只显示今天\明天\本周\本月\本年**,
所谓眼不见,心不烦,
用户可以专注于今日要做的事,
又可以随时预分配将来某天的任务

[回顶部][top]

---------------------

<a name="compile"></a>
# 编译程序

**人人网上发布的版本是包含bin目录的
(里面是编译好的class文件),
不用编译了,可直接运行.**

如果你打算从最新源代码编译这个项目,有两套方案:

1. 如果你安装了eclipse

	那么可以将这个项目导入到eclipse中,
eclipse自动编译

1. 如果你安装了JDK而没有安装eclipse
并且将JDK的bin目录加入到了PATH变量中.

	**那么双击运行compile.bat脚本,
就会编译源代码至bin目录中.**

	--------

	compile.bat脚本中的内容如下:

		if exist bin goto run
		mkdir bin

		:run
		cd src\gui
		javac -classpath .. -d ..\..\bin Top.java
		echo 编译完毕
		set /p A=按回车结束

	2. 首先检查bin目录是否存在,若不存在则创建bin目录
	(因为javac编译的时候必须指定一个存在的文件夹存放编译出来的class文件).
	2. 然后编译src中的源代码
		* -classpath .. 指定源代码的存放目录为src\gui的父目录,
		也就是src目录
		* `-d ..\..\bin` 指定编译产生的class文件的存放目录
		* Top 是包含入口 main 方法的类

[回顶部][top]

---------------------

<a name="run"></a>
# 运行程序及开机启动

* ## 运行程序

	**双击start.vbs即可**

	-------

	vbs 也是windows的一种脚本,
这脚本其实我也不懂,只是用它来启动一个隐藏的 cmd 
(**这个程序本就是图形化的程序,命令行窗体就滚一边去吧!**),
在其中运行 run.bat 脚本来运行 java 程序,
start.vbs 的内容如下:

		Set ws = CreateObject("Wscript.Shell")
		ws.run "cmd /c run.bat",vbhide

	就是那个 vbhide 参数将 cmd 窗体隐藏了,
run.bat 的内容如下:

		start /b java -classpath bin gui.Top

	* start /b *program*

		这个意思是后台运行 program ,
	你可以打开 cmd 输入命令试试,真的可以后台运行!
	本期望用这行脚本就可以让 cmd 启动 java 程序后就退出,
	可是 cmd 窗体就是赖在桌面上不走!只好祭出 start.vbs 杀着了.

	* -classpath bin

		指定 class 文件的搜索路径为 bin

* ## 开机启动

	如果你喜欢这个程序,一定想将这个程序设为开机启动,
这样就省事多了.设置开机启动也很简单:

	1. 创建start.vbs的快捷方式
	1. 将start.vbs的快捷方式移动到 **启动** 文件夹中
		* Win7 在 开始 中
		* XP 在 开始->程序 中

[回顶部][top]

-----------------------

<a name="version"></a>
# 数字版本约定

**每次提交创建一个版本,版本号的格式为A.B.C**

## 3段数字的含义

1. A代表某个重要功能
1. B代表实现A号功能的其中某个步骤
1. C代表一次提交,奇偶分别表示不同类型的提交
	* 偶数表示为实现新功能做的添加或改动
	* 奇数表示为维护已实现功能做的删除或改动

## 什么时候会有更新

1. 在完成一个B的时候推送更新到github
1. 在完成一个重要功能之后版本号后加上(final)推送至github
	(表示一个功能开发完毕,可以安全地使用新的功能),
	我会在人人网上发布每一个final版本
1. 开发中如果遇到可能导致重大问题的Bug,
	解决后立即推送至github,
	并在人人网上发布
1. 在所有功能开发完毕后,如果发现Bug,会提交新的final版本,
	C是比之前的final版本更大的奇数(意味着本程序将持续维护)

**因此github上会有最新的版本,
而人人网上会有最新的final版本(稳定版本)**

[回顶部][top]

---------------------

<a name="source"></a>
# 源码介绍

源码介绍正在编写中……

[回顶部][top]
